# grpc-sample

This is tf files for the [grpc-sample](https://github.com/takahiroaoki/grpc-sample) project.

The AMI is generated by Packer, and the source is [there](https://github.com/takahiroaoki/packer-container/tree/main/projects/grpc-sample).

```
#1 You must setup s3 backet for terraform backend.
$ cd ${path to backend}
$ terraform init
$ terraform apply -auto-approve

#2 Update settings
$ cd ${path to projects/grpc-sample}
- update terraform.backend.s3.bucket to your own setting.

#3 Generate ssh keypair for ec2 instance
$ sh /gen-key.sh

#4 Apply
$ terraform init
$ terraform apply -auto-approve

#5 Migration & Boot
- ssh to ec2 instance via SSH tunnel of VSCode
$ source ~/export.sh
$ grpc-sample migrate up
$ grpc-sample server -r true

#6 Check it out
- install the Postman extension
- use localhost:8080 via SSH tunnel (it needs port forward 8080:8080)
```